extends layout.pug

include mixins/form.pug

block tools
  +tools('show', page.wikiname)

block contents
  if !isAjax
    #content.show
      +notice()
      +warning()
      !=content
  else
    .jingo-content.jingo-show
      !=content

  p(class=isAjax ? 'jingo-footer' : 'footer') Created by:&nbsp;&nbsp;
    if page.createData.email && page.createData.email != 'jingouser'
      img(src=gravatar().url(page.createData.email, {s:16}))
    b  #{page.createData.author}
    |,&nbsp;
    b  #{page.createData.date}
    br
    | Updated by:&nbsp;&nbsp;
    if page.metadata.email && page.metadata.email != 'jingouser'
      img(src=gravatar().url(page.metadata.email, {s:16}))
    b  #{page.metadata.author}
    |,&nbsp;
    b(title=page.metadata.date) #{page.metadata.relDate}&nbsp;
    | &ndash; #{page.metadata.hash}

block scripts
  script.
    $(document).ready(function(){
      $("#toc a").on("click", function (event) {
        if (this.hash !== "") {
          event.preventDefault();

          var hash = this.hash;

          $("html, body").animate({scrollTop: $(hash).offset().top}, 800, function () {
                                  window.location.hash = hash});
        }
      });
    });
    
